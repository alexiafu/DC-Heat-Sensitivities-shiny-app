---
title: "City Water and Source Exploration"
format: pdf
editor: visual
---

## City Water Exploration

This is an initial exploration of the data from the City Water Intake Locations and Sources from [City Water Intake Locations and Sources \| Resource Watch](https://resourcewatch.org/data/explore/wat012-City-Water-Intake-Locations_replacement?section=Discover&selectedCollection=&zoom=3.8833628816476375&lat=-34.04161880768304&lng=-64.30928074780947&pitch=0&bearing=0&basemap=dark&labels=light&layers=%255B%257B%2522dataset%2522%253A%252202777be9-a10b-4201-b25a-90f80bea5701%2522%252C%2522opacity%2522%253A1%252C%2522layer%2522%253A%2522c547e864-ae0c-4d77-b054-fe474808dd1d%2522%257D%255D&aoi=&page=1&sort=most-viewed&sortDirection=-1). This exploration is simply to get a sense of the time, scope and measurements included in this data set. Furthermore, I will visualize data to prepare for econometric modeling.

This data set shows over 1,500 water intake locations from the first global survey of the water sources of over 500 large cities. The data set was created and published by Rob McDonald and The Nature Conservancy from research on water utilities and their annual reports. For each intake location, spatial location was recorded. The locations were recorded as accurately as possible, and freshwater withdrawal points were adjusted to match the underlying hydrographic river system. Some intake points serve multiple water utilities and cities. Resource Watch shows only a subset of the data set.

## Loading Data

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r echo=FALSE}
library(tidyverse)
library(RODBC)
dta <- odbcConnectAccess2007("C:/Users/Karl/Dropbox/PC/Documents/Conduct III/DeprivatizationWater DiD/City_Water_Map_v1.6.accdb") 

names <- c("TBL_City_WWA_WW", "TBL_DVSN","TBL_DVTR_DVSN_City_WTP","TBL_DVTR_System",
           "TBL_Retired_DVSNs","TBL_Retired_DVTR_DVSN","TBL_WTP","TBL_WW",
           "TBL_WW_Agency", "TBL_WW_Shed","TBL_WW")
#specifies the file path

#I did this, but should write a for loop instead
df1 <- sqlFetch(dta, "TBL_City")   #loads the table called 'bar' in the original Access file
df2 <- sqlFetch(dta, "TBL_City_WWA_WW")
df3 <- sqlFetch(dta, "TBL_DVSN")
df4 <- sqlFetch(dta, "TBL_DVSN_Shed")
df5 <- sqlFetch(dta, "TBL_DVTR")
df6 <- sqlFetch(dta, "TBL_DVTR_DVSN_City_WTP")
df7 <- sqlFetch(dta, "TBL_DVTR_System")
df8 <- sqlFetch(dta, "TBL_Retired_DVSNs")
df9 <- sqlFetch(dta, "TBL_Retired_DVTR_DVSN")
df10 <- sqlFetch(dta, "TBL_WTP")
df11 <- sqlFetch(dta, "TBL_WW")
df12 <- sqlFetch(dta, "TBL_WW_Agency")
df13 <- sqlFetch(dta, "TBL_WW_Shed")
df14 <- sqlFetch(dta, "TBL_WW")
```

You can add options to executable code like this

```{r}
df_full <- list(df1,df2,df3,df4,df5,df6,df7,df8,df8,df10,df11,df12,df13)
df_list1 <-list(df1,df2,df6)
city <- full_join(df1,df2)
whats_this(city) %>% View()
visualize(city, "numeric")
city <- full_join(city, df6)
unique(city$city_name)
 city <- full_join(city,df3)
city <- full_join(city, df4)
city<- full_join(city,df8)
city <- full_join(city, df9)

city <- full_join(city, df7)

city <- full_join(city, df5)
  View(city)
  
```

```{r}

data1 <- read.csv("C:/Users/Karl/Dropbox/PC/Documents/Conduct III/DeprivatizationWater DiD/Data/remunicaplisationALLDATA.csv")
View(data1)
               
```

```{r}
visualize(city, "numeric")
unique(data1$)
```

```{r}
unique(remun$city)
```
